import{w}from"./with-props-BiQABcLS.js";import{r as a,q as g,n as e}from"./chunk-AYJ5UCUI-D02hIfpQ.js";import{a as b}from"./index-xsH4HHeE.js";const j=()=>{const[n,c]=a.useState(""),[l,d]=a.useState(""),[o,i]=a.useState(""),[m,t]=a.useState(""),[u,h]=a.useState(""),x=g(),f=async s=>{var p;if(s.preventDefault(),l!==o){t("رمز عبور و تأیید رمز عبور یکسان نیستند");return}try{const r=await b.post("http://localhost:5000/api/register",{username:n,password:l,password2:o},{withCredentials:!0});r.data.message==="User registered successfully"?(h("ثبت نام با موفقیت انجام شد!"),c(""),d(""),i(""),x("/panel")):r.data.message==="Username already exists"&&t("این نام کاربری قبلاً ثبت شده است")}catch(r){b.isAxiosError(r)?((p=r.response)==null?void 0:p.status)===409?t("این نام کاربری قبلاً ثبت شده است"):t("خطا در ثبت نام، لطفا دوباره تلاش کنید."):t("خطای ناشناخته")}};return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("form",{onSubmit:f,className:"bg-white p-6 rounded shadow-md w-1/3 flex flex-col",children:[e.jsx("h2",{className:" text-xl font-bold mb-4 text-black",children:"ثبت نام"}),m&&e.jsx("div",{className:"text-red-500 mb-4",children:m}),u&&e.jsx("div",{className:"text-green-500 mb-4",children:u}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-black",children:"نام کاربری"}),e.jsx("input",{type:"text",id:"username",value:n,onChange:s=>c(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded mt-1 text-black",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-black",children:"رمز عبور"}),e.jsx("input",{type:"password",id:"password",value:l,onChange:s=>d(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded mt-1 text-black",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password2",className:"block text-sm font-medium text-black",children:"تأیید رمز عبور"}),e.jsx("input",{type:"password",id:"password2",value:o,onChange:s=>i(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded mt-1 text-black",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded cursor-pointer",children:"ثبت نام"}),e.jsx("button",{onClick:()=>x("/"),className:"bg-red-500 text-white px-4 py-1 rounded cursor-pointer mt-4 w-40 self-center",children:"صفحه اصلی"})]})})},k=w(j);export{k as default};
